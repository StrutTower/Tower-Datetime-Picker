!function(){"use strict";function e(e){return{restrict:"E",templateUrl:"twrDatetimePicker.html",transclude:!0,scope:{ngModel:"=",minDate:"=",maxDate:"="},link:function(t,a,n){function r(){23===t.date.hour?t.date.hour=0:t.date.hour++}function d(){0===t.date.hour?t.date.hour=23:t.date.hour--}function i(){t.date.minute>=0&&t.date.minute<15?t.date.minute=15:t.date.minute>=15&&t.date.minute<30?t.date.minute=30:t.date.minute>=30&&t.date.minute<45?t.date.minute=45:t.date.minute>=45&&(t.date.hour<23?t.date.hour=t.date.hour+1:t.date.hour=0,t.date.minute=0)}function s(){t.date.minute>0&&t.date.minute<=15?t.date.minute=0:t.date.minute>15&&t.date.minute<=30?t.date.minute=15:t.date.minute>30&&t.date.minute<=45?t.date.minute=30:(0===t.date.minute||t.date.minute>45)&&(t.date.hour>0?t.date.hour=t.date.hour-1:t.date.hour=23,t.date.minute=45)}function o(){t.settings.currentView=t.settings.defaultView,c()}function c(){t.date.display||(t.date.display=new Date,(t.date.display<t.minDate||t.date.display>t.maxDate)&&(t.minDate?t.date.display=t.minDate:t.maxDate&&(t.date.display=t.maxDate))),v(),t.settings.isVisible||(t.settings.isVisible=!0)}function l(){t.settings.isVisible=!1}function u(e){t.settings.isVisible&&!C&&(l(),t.$digest()),C=!1}function g(e){C=!0}function h(){var e=t.date.display;"month"===t.settings.currentView?t.date.display=new Date(e.getFullYear(),e.getMonth()-1,e.getDate()):"year"===t.settings.currentView&&(t.date.display=new Date(e.getFullYear()-1,e.getMonth(),e.getDate())),v()}function m(){var e=t.date.display;"month"===t.settings.currentView?t.date.display=new Date(e.getFullYear(),e.getMonth()+1,e.getDate()):"year"===t.settings.currentView&&(t.date.display=new Date(e.getFullYear()+1,e.getMonth(),e.getDate())),v()}function w(){"time"===t.settings.currentView&&t.settings.datePicker?(t.settings.currentView="month",v()):"month"===t.settings.currentView&&(t.settings.currentView="year",v())}function D(e){var a=t.date.display.getFullYear();t.date.display=new Date(a,e,1),t.settings.currentView="month",v()}function p(e){if(!F(e)&&!Y(e)){if(t.date.selected){var a=t.date.selected;t.date.selected=new Date(e.getFullYear(),e.getMonth(),e.getDate(),a.getHours(),a.getMinutes())}else t.date.selected=new Date(e.getFullYear(),e.getMonth(),e.getDate(),12,0);t.date.display=t.date.selected,k(),t.settings.timePicker?t.settings.currentView="time":t.settings.autoClose&&l(),v()}}function v(){t.date.display||(t.date.display=new Date);var e=t.date.display;"year"===t.settings.currentView?b(e):"month"===t.settings.currentView?f(e):"time"===t.settings.currentView&&y(e)}function y(e){if(t.settings.timePicker){if(!t.date.selected){var a=new Date;t.date.selected=new Date(a.getFullYear(),a.getMonth(),a.getDate(),12,0)}t.date.hour=t.date.selected.getHours(),t.date.minute=t.date.selected.getMinutes()}}function f(e){t.weeks=[];var a,n,r=[],d=new Date(e.getFullYear(),e.getMonth(),1),i=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),s=d.getDay(),o=1;if(s>0)for(n=new Date(d),n.setDate(d.getDate()-s),a=0;s>a;a++)o>7&&(o=1,t.weeks.push(r),r=[]),r.push({date:new Date(n),day:n.getDate(),otherMonth:!0,now:x(n,new Date),selected:x(n,t.date.selected)}),o++,n.setDate(n.getDate()+1);for(n=d,a=0;i>a;a++)o>7&&(o=1,t.weeks.push(r),r=[]),r.push({date:new Date(n),day:n.getDate(),otherMonth:!1,now:x(n,new Date),selected:x(n,t.date.selected)}),o++,n.setDate(n.getDate()+1);var c=new Date(n);if(c.setDate(n.getDate()-1),c.getDay()<7)for(a=c.getDay();6>a;a++)r.push({date:new Date(n),day:n.getDate(),otherMonth:!0,now:x(n,new Date),selected:x(n,t.date.selected)}),n.setDate(n.getDate()+1);t.weeks.push(r)}function b(e){var a=0;t.months=[];var n=[],r=new Date;angular.forEach(t.monthNames,function(d,i){var s=!1;r.getFullYear()===e.getFullYear()&&r.getMonth()===i&&(s=!0);var o=!1;t.date.selected&&t.date.selected.getFullYear()===e.getFullYear()&&t.date.selected.getMonth()===i&&(o=!0);var c={name:d,number:i,year:e.getFullYear(),now:s,selected:o};n.push(c),a++,a>3&&(t.months.push(n),n=[],a=0)})}function M(){var e=n.dateOnly;void 0!==e&&(t.settings.timePicker=!1);var a=n.timeOnly;if(void 0!==a&&(t.settings.datePicker=!1),!t.settings.timePicker&&!t.settings.datePicker)throw"tower-datetime-picker: The date picker and time picker cannot both be deactivated.";t.settings.timePicker&&!t.settings.datePicker&&(t.settings.defaultView="time");var r=n.showClearButton;void 0!==r&&(t.settings.showClearButton=!0);var d=n.dateAutoclose;void 0!==d&&(t.settings.autoClose=!0)}function k(){t.ngModel=t.date.selected}function V(){t.date.selected=void 0,k(),l()}function x(e,t){return!(!e||!t||e.getFullYear()!==t.getFullYear()||e.getMonth()!==t.getMonth()||e.getDate()!==t.getDate())}function F(e){if(!t.minDate)return!1;var a=new Date(t.minDate.getFullYear(),t.minDate.getMonth(),t.minDate.getDate()-1,23,59,59);return a>e}function Y(e){if(!t.maxDate)return!1;var a=new Date(t.maxDate.getFullYear(),t.maxDate.getMonth(),t.maxDate.getDate(),23,59,59);return e>a}t.weeks=[],t.date={},t.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t.days=["Su","Mo","Tu","We","Th","Fr","Sa"],t.settings={isVisible:!1,isHovering:!1,defaultView:"month",currentView:"",datePicker:!0,timePicker:!0,showClearButton:!1,autoClose:!1,minDate:void 0,maxDate:void 0},e.on("click",u),a.on("click",g),M(),t.ngModel&&(t.date.selected=new Date(t.ngModel),t.date.display=new Date(t.ngModel)),t.transcludeClicked=o,t.previous=h,t.next=m,t.selectDate=p,t.selectMonth=D,t.previousView=w,t.clearModel=V,t.minDateCompare=F,t.maxDateCompare=Y,t.nextHour=r,t.previousHour=d,t.nextMinute=i,t.previousMinute=s,t.$watch("date.hour",function(e){var a=t.date.selected;e>=0&&24>e&&a&&(t.date.minute||(t.date.minute=0,t.date.displayMinute="00"),t.date.selected=new Date(a.getFullYear(),a.getMonth(),a.getDate(),t.date.hour,t.date.minute),k())}),t.$watch("date.minute",function(e){var a=t.date.selected;if(e>=0&&60>e&&a){t.date.hour||(t.date.hour=0),t.date.selected=new Date(a.getFullYear(),a.getMonth(),a.getDate(),t.date.hour,t.date.minute);var n=t.date.minute.toString();1===n.length&&(n="0"+n),t.date.displayMinute=n,k()}}),t.$watch("date.displayMinute",function(e){var a=t.date.selected,n=parseInt(e);if(n&&n>=0&&60>n){t.date.hour||(t.date.hour=0),t.date.selected=new Date(a.getFullYear(),a.getMonth(),a.getDate(),t.date.hour,n);var r=n.toString();1===r.length&&2===e.length&&(r="0"+r),t.date.displayMinute=r,k()}});var C=!1;t.$watch("minDate",function(){var e=Date.parse(t.minDate);isNaN(e)?t.settings.minDate=void 0:(t.settings.minDate=new Date(t.minDate),F(t.ngModel)&&(t.ngModel=void 0))}),t.$watch("maxDate",function(){var e=Date.parse(t.maxDate);isNaN(e)?t.settings.maxDate=void 0:(t.settings.maxDate=new Date(t.maxDate),Y(t.ngModel)&&(t.ngModel=void 0))})}}}angular.module("twrDatetimePicker",[]).directive("twrDatetime",e),e.$inject=["$document"],angular.module("twrDatetimePicker").run(["$templateCache",function(e){e.put("twrDatetimePicker.html",'<div class="twr-date-picker-template" data-ng-class="{\'hide-picker\': !settings.isVisible}">\r\n    <data-ng-transclude data-ng-click="transcludeClicked()"></data-ng-transclude>\r\n\r\n    <div class="twr-date-picker-container">\r\n\r\n        <table class="twr-date-picker-header">\r\n            <tbody>\r\n                <tr>\r\n                    <td class="twr-date-picker-header-button-left">\r\n                        <div data-ng-hide="settings.currentView == \'time\'">\r\n                            <a href="" class="chevrons" data-ng-click="previous()">\r\n                                <b class="twr-chevron-left"></b>\r\n                            </a>\r\n                        </div>\r\n                    </td>\r\n                    <td class="twr-date-picker-title">\r\n                        <div data-ng-click="previousView()"\r\n                             data-ng-show="settings.datePicker"\r\n                             data-ng-switch="settings.currentView">\r\n                            <span data-ng-switch-when="time" data-ng-bind="date.display | date: \'M/d/yyyy\'">\r\n                            </span>\r\n                            <span data-ng-switch-when="month" data-ng-bind="date.display | date: \'MMMM yyyy\'">\r\n                            </span>\r\n                            <span data-ng-switch-when="year" data-ng-bind="date.display | date: \'yyyy\'">\r\n                            </span>\r\n                        </div>\r\n                    </td>\r\n                    <td class="twr-date-picker-header-button-right">\r\n                        <div data-ng-hide="settings.currentView == \'time\'">\r\n                            <a href="" class="chevrons" data-ng-click="next()">\r\n                                <b class="twr-chevron-right"></b>\r\n                            </a>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n\r\n        <div class="twr-date-picker-body" data-ng-switch data-on="settings.currentView">\r\n\r\n            <div class="twr-time-view" data-ng-switch-when="time">\r\n                <table>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>\r\n                                <a href="" class="chevrons" data-ng-click="nextHour()">\r\n                                    <b class="twr-chevron-up"></b>\r\n                                </a>\r\n                            </td>\r\n                            <td class="time-spacer-col"></td>\r\n                            <td>\r\n                                <a href="" class="chevrons" data-ng-click="nextMinute()">\r\n                                    <b class="twr-chevron-up"></b>\r\n                                </a>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                <input type="number" max="23" data-ng-model="date.hour" data-ng-change="hourChanged()" class="form-control" />\r\n                            </td>\r\n                            <td class="time-spacer-col">:</td>\r\n                            <td>\r\n                                <input type="text" minlength="1" maxlength="2"\r\n                                       data-ng-model="date.displayMinute" \r\n                                       data-ng-change="minuteChanged()"\r\n                                       pattern="([0-9]|[0-5][0-9])"\r\n                                       class="form-control" />\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                <a href="" class="chevrons" data-ng-click="previousHour()">\r\n                                    <b class="twr-chevron-down"></b>\r\n                                </a>\r\n                            </td>\r\n                            <td class="time-spacer-col"></td>\r\n                            <td>\r\n                                <a href="" class="chevrons" data-ng-click="previousMinute()">\r\n                                    <b class="twr-chevron-down"></b>\r\n                                </a>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            <div class="twr-view-month" data-ng-switch-when="month">\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th data-ng-repeat="day in days" data-ng-bind="day"></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr data-ng-repeat="week in weeks">\r\n                            <td data-ng-repeat="day in week"\r\n                                data-ng-class="{\'other-month\': day.otherMonth, \'now\': day.now, \'selected\': day.selected, \'disabled\': minDateCompare(day.date) || maxDateCompare(day.date)}"\r\n                                data-ng-click="selectDate(day.date)"\r\n                                data-ng-bind="day.day">\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            <div class="twr-view-year" data-ng-switch-when="year">\r\n                <table>\r\n                    <tbody>\r\n                        <tr data-ng-repeat="monthGroup in months">\r\n                            <td data-ng-repeat="month in monthGroup"\r\n                                data-ng-class="{\'now\': month.now, \'selected\': month.selected}"\r\n                                data-ng-click="selectMonth(month.number)"\r\n                                data-ng-bind="month.name">\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class="twr-date-picker-footer">\r\n            <div class="twr-date-picker-button-panel" data-ng-show="settings.showClearButton">\r\n                <button type="button" data-ng-click="clearModel()">Clear Date/Time</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>')}])}();