"use strict"; !function () { function e(e, t, a, n) { return { restrict: "A", require: "ngModel", template: '<div class="twr-date-picker-template"><input data-ng-click="twrDateInputClick()" value="{{date.selected | date: dateFormat}}" readonly /></div>', replace: !0, scope: { ngModel: "=" }, link: function (n, d, i, s) { function r() { n.date.display || (n.date.display = new Date), v(), n.settings.isVisible || d.removeClass("hide-picker"), t.bind("click", c) } function o() { d.addClass("hide-picker"), n.settings.isVisible = !1 } function c() { n.hovering || o() } function l() { n.hovering = !0 } function u() { n.hovering = !1 } function h() { var e = n.date.display; "month" == n.settings.currentView ? n.date.display = new Date(e.getFullYear(), e.getMonth() - 1, e.getDate()) : "year" == n.settings.currentView && (n.date.display = new Date(e.getFullYear() - 1, e.getMonth(), e.getDate())), v() } function g() { var e = n.date.display; "month" == n.settings.currentView ? n.date.display = new Date(e.getFullYear(), e.getMonth() + 1, e.getDate()) : "year" == n.settings.currentView && (n.date.display = new Date(e.getFullYear() + 1, e.getMonth(), e.getDate())), v() } function m() { "time" == n.settings.currentView ? (n.settings.currentView = "month", v()) : "month" == n.settings.currentView && (n.settings.currentView = "year", v()) } function w(e) { var t = n.date.display.getFullYear(); n.date.display = new Date(t, e, 1), n.settings.currentView = "month", v() } function p(e) { if (n.date.selected) { var t = n.date.selected; n.date.selected = new Date(e.getFullYear(), e.getMonth(), e.getDate(), t.getHours(), t.getMinutes()) } else n.date.selected = new Date(e.getFullYear(), e.getMonth(), e.getDate(), 12, 0); n.date.display = n.date.selected, b(), n.settings.timePicker ? n.settings.currentView = "time" : n.settings.autoClose && o(), v() } function v() { n.date.display || (n.date.display = new Date); var e = n.date.display; "year" == n.settings.currentView ? D(e) : "month" == n.settings.currentView ? f(e) : "time" == n.settings.currentView && y(e) } function y(e) { if (n.settings.datePicker) { var t = n.date.selected.getHours().toString(), a = n.date.selected.getMinutes().toString(); 1 == t.length ? n.date.hour = "0" + t : n.date.hour = t, 1 == a.length ? n.date.minute = "0" + a : n.date.minute = a } } function f(e) { n.weeks = []; var t = [], a = new Date(e.getFullYear(), e.getMonth(), 1), d = new Date(e.getFullYear(), e.getMonth() + 1, 0).getDate(), i = a.getDay(), s = 1; if (i > 0) for (var r = moment(a).subtract(i, "days").toDate(), o = 0; i > o; o++) s > 7 && (s = 1, n.weeks.push(t), t = []), t.push({ date: r, day: r.getDate(), otherMonth: !0, now: V(r, new Date), selected: V(r, n.date.selected) }), s++, r = moment(r).add(1, "days").toDate(); for (var r = a, o = 0; d > o; o++) s > 7 && (s = 1, n.weeks.push(t), t = []), t.push({ date: r, day: r.getDate(), otherMonth: !1, now: V(r, new Date), selected: V(r, n.date.selected) }), s++, r = moment(r).add(1, "days").toDate(); var c = moment(r).subtract(1, "days").toDate(); if (c.getDay() < 7) for (var o = c.getDay() ; 6 > o; o++) t.push({ date: r, day: r.getDate(), otherMonth: !0, now: V(r, new Date), selected: V(r, n.date.selected) }), r = moment(r).add(1, "days").toDate(); n.weeks.push(t) } function D(e) { var t = 0; n.months = []; var a = [], d = new Date; angular.forEach(n.monthNames, function (i, s) { var r = !1; d.getFullYear() == e.getFullYear() && d.getMonth() == s && (r = !0); var o = !1; n.date.selected && n.date.selected.getFullYear() == e.getFullYear() && n.date.selected.getMonth() == s && (o = !0); var c = { name: i, number: s, year: e.getFullYear(), now: r, selected: o }; a.push(c), t++, t > 3 && (n.months.push(a), a = [], t = 0) }) } function k() { var t = a.get("templates/twrDatePicker.html"); d.addClass("hide-picker"), v(), d.append(e(t)(n)) } function M() { var e = i.hideTimePicker; null != e && (n.settings.timePicker = !1); var t = i.showClearButton; null != t && (n.settings.showClearButton = !0); var a = i.autoClose; null != a && (n.settings.autoClose = !0); var d = i.dateFormat; d ? n.dateFormat = d : n.settings.datePicker && n.settings.timePicker ? n.dateFormat = "MM/dd/yyyy HH:mm" : n.settings.datePicker && !n.settings.timePicker && (n.dateFormat = "MM/dd/yyyy") } function b() { n.$evalAsync(function () { n.ngModel = n.date.selected }) } function F() { n.date.selected = null, b() } function V(e, t) { return e && t && e.getFullYear() == t.getFullYear() && e.getMonth() == t.getMonth() && e.getDate() == t.getDate() ? !0 : !1 } n.weeks = [], n.date = {}, n.monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], n.days = ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], n.settings = { isVisible: !1, currentView: "month", datePicker: !0, timePicker: !0, showClearButton: !1, autoClose: !1 }, M(), k(), n.ngModel && (n.date.selected = new Date(n.ngModel), n.date.display = new Date(n.ngModel)), n.previous = h, n.next = g, n.selectDate = p, n.selectMonth = w, n.previousView = m, n.clearModel = F, n.nextHour = function () { var e = parseInt(n.date.hour); 23 == e ? n.date.hour = "00" : (e++, 1 == e.toString().length ? n.date.hour = "0" + e : n.date.hour = e) }, n.previousHour = function () { var e = parseInt(n.date.hour); 0 == e ? n.date.hour = "23" : (e -= 1, 1 == e.toString().length ? n.date.hour = "0" + e : n.date.hour = e) }, n.nextMinute = function () { n.date.minute >= 0 && n.date.minute < 15 ? n.date.minute = "15" : n.date.minute >= 15 && n.date.minute < 30 ? n.date.minute = "30" : n.date.minute >= 30 && n.date.minute < 45 ? n.date.minute = "45" : n.date.minute >= 45 && (n.date.minute = "00") }, n.previousMinute = function () { n.date.minute > 0 && n.date.minute <= 15 ? n.date.minute = "00" : n.date.minute > 15 && n.date.minute <= 30 ? n.date.minute = "15" : n.date.minute > 30 && n.date.minute <= 45 ? n.date.minute = "30" : (0 == n.date.minute || n.date.minute > 45) && (n.date.minute = "45") }, n.$watch("date.hour", function (e) { var t = n.date.selected; e >= 0 && 24 > e && (n.date.minute || (n.date.minute = "00"), n.date.selected = new Date(t.getFullYear(), t.getMonth(), t.getDate(), n.date.hour, n.date.minute), b()) }), n.$watch("date.minute", function (e) { var t = n.date.selected; e >= 0 && 60 > e && (n.date.hour || (n.date.hour = "00"), n.date.selected = new Date(t.getFullYear(), t.getMonth(), t.getDate(), n.date.hour, n.date.minute), b()) }), n.twrDateInputClick = function () { n.settings.currentView = "month", r() }, d.bind("mouseover", l), d.bind("mouseout", u) } } } function t(e) { e.put("templates/twrDatePicker.html", '<div class="twr-date-picker-container">    <div class="twr-date-picker-header">        <div class="twr-date-picker-header-button-left" data-ng-hide="settings.currentView == \'time\'">            <a href="" class="chevrons" data-ng-click="previous()">                <i class="fa fa-chevron-left"></i>            </a>        </div>        <div  class="twr-date-picker-header-button-right" data-ng-hide="settings.currentView == \'time\'">            <a href="" class="chevrons" data-ng-click="next()">                <i class="fa fa-chevron-right"></i>            </a>        </div>        <div class="twr-date-picker-title"             data-ng-click="previousView()"             data-ng-switch data-on="settings.currentView">            <span data-ng-switch-when="time">                {{date.display | date: \'MM/dd/yyyy\'}}            </span>            <span data-ng-switch-when="month">                {{date.display | date: \'MMMM\'}} {{date.display | date: \'yyyy\'}}            </span>            <span data-ng-switch-when="year">                {{date.display | date: \'yyyy\'}}            </span>        </div>    </div>    <div></div>    <div class="twr-date-picker-body" data-ng-switch data-on="settings.currentView">        <div class="twr-time-view" data-ng-switch-when="time">            <table>                <tbody>                    <tr>                        <td>                            <a href="" class="chevrons" data-ng-click="nextHour()">                                <i class="fa fa-chevron-up"></i>                            </a>                        </td>                        <td class="time-spacer-col"></td>                        <td>                            <a href="" class="chevrons"  data-ng-click="nextMinute()">                                <i class="fa fa-chevron-up"></i>                            </a>                        </td>                    </tr>                    <tr>                        <td><input type="text" max="23" data-ng-model="date.hour" /></td>                        <td class="time-spacer-col">:</td>                        <td><input type="text" max="59" data-ng-model="date.minute" /></td>                    </tr>                    <tr>                        <td>                            <a href="" class="chevrons"  data-ng-click="previousHour()">                                <i class="fa fa-chevron-down"></i>                            </a>                        </td>                        <td class="time-spacer-col"></td>                        <td>                            <a href="" class="chevrons" data-ng-click="previousMinute()">                                <i class="fa fa-chevron-down"></i>                            </a>                        </td>                    </tr>                </tbody>            </table>        </div>        <div class="twr-view-month" data-ng-switch-when="month">            <table>                <thead>                    <tr>                        <th data-ng-repeat="day in days">{{day}}</th>                    </tr>                </thead>                <tbody>                    <tr data-ng-repeat="week in weeks">                        <td data-ng-repeat="day in week"                            data-ng-class="{\'other-month\': day.otherMonth, \'now\': day.now, \'selected\': day.selected}"                            data-ng-click="selectDate(day.date)">                            {{day.day}}                        </td>                    </tr>                </tbody>            </table>        </div>        <div class="twr-view-year" data-ng-switch-when="year">            <table>                <tbody>                    <tr data-ng-repeat="monthGroup in months">                        <td data-ng-repeat="month in monthGroup"                            data-ng-class="{\'now\': month.now, \'selected\': month.selected}"                            data-ng-click="selectMonth(month.number)">                            {{month.name}}                        </td>                    </tr>                </tbody>            </table>        </div>            </div>    <div class="twr-date-picker-footer">        <div class="twr-date-picker-button-panel" data-ng-show="settings.showClearButton">            <button type="button" data-ng-click="clearModel()">Clear Date/Time</button>        </div>    </div></div>') } angular.module("twrDatetimePicker", []).directive("twrDatetimePicker", e), e.$inject = ["$compile", "$document", "$templateCache", "$http"], angular.module("twrDatetimePicker").run(t), t.$inject = ["$templateCache"] }();